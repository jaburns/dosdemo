#!/usr/bin/env bash
set -e

install_nasm() {
    rm -rf nasm
    wget http://www.nasm.us/pub/nasm/releasebuilds/2.14rc0/dos/nasm-2.14rc0-dos.zip
    unzip nasm-2.14rc0-dos.zip
    rm nasm-2.14rc0-dos.zip
    mv nasm-2.14rc0 nasm
}

create_sine_table() {
    awk 'BEGIN {
        for (t = 0; t <= 255; t += 2)
            printf("%02x", 255*sin(3.14159265358979 * t / 256.0) + 0.5);
    }'
}

install_nasm
printf 'Creating sine table "sine.dat"...'
create_sine_table | xxd -r -p > sine.dat
echo 'Done!'
